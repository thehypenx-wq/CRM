@model List<OfficeSuite.Models.User>

<div class="card card-modern">
    <div class="card-header bg-white pt-4 px-4 border-bottom-0 d-flex justify-content-between align-items-center">
        <div>
            <h4 class="mb-1">User Management</h4>
            <p class="text-muted small mb-0">Manage system access and roles</p>
        </div>
        <a asp-action="Create" class="btn btn-primary"><i data-feather="user-plus" class="me-1"></i> Add New User</a>
    </div>
    <div class="card-body px-4 pb-4">
        <div class="table-responsive">
            <table class="table table-hover align-middle">
                <thead class="bg-light">
                    <tr>
                        <th class="ps-3 border-0">User Identity</th>
                        <th class="border-0">Role</th>
                        <th class="border-0">Status</th>
                        <th class="border-0">Joined</th>
                        <th class="text-end pe-3 border-0">Actions</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var user in Model)
                    {
                        <tr>
                            <td class="ps-3">
                                <div class="d-flex align-items-center">
                                    <div class="rounded-circle bg-light p-2 me-2 border">
                                        <i data-feather="user" style="width: 18px; height: 18px;" class="text-primary"></i>
                                    </div>
                                    <div>
                                        <span class="fw-bold d-block">@user.Username</span>
                                        <small class="text-muted">@user.Email</small>
                                    </div>
                                </div>
                            </td>
                            <td>
                                <span class="badge @(user.Role == "Admin" ? "bg-gradient-primary" : "bg-light text-dark border")">
                                    @user.Role
                                </span>
                            </td>
                            <td>
                                @if (user.IsActive)
                                {
                                    <span class="badge bg-success-soft text-success px-3">Active</span>
                                }
                                else
                                {
                                    <span class="badge bg-danger-soft text-danger px-3">Deactivated</span>
                                }
                            </td>
                            <td class="small text-muted">@user.CreatedAt.ToString("MMM dd, yyyy")</td>
                            <td class="text-end pe-3">
                                <div class="d-flex justify-content-end gap-2">
                                    <form asp-action="ToggleStatus" method="post" style="display:inline;">
                                        <input type="hidden" name="id" value="@user.Id" />
                                        <button type="submit" class="btn btn-sm @(user.IsActive ? "btn-outline-warning" : "btn-outline-success")" title="@(user.IsActive ? "Deactivate" : "Activate")">
                                            <i data-feather="@(user.IsActive ? "user-minus" : "user-check")"></i>
                                        </button>
                                    </form>
                                    <a asp-action="Edit" asp-route-id="@user.Id" class="btn btn-sm btn-outline-primary" title="Edit">
                                        <i data-feather="edit-2"></i>
                                    </a>
                                    <a asp-action="Permissions" asp-route-id="@user.Id" class="btn btn-sm btn-outline-info" title="Permissions">
                                        <i data-feather="shield"></i>
                                    </a>
                                    <form asp-action="Delete" method="post" style="display:inline;" onsubmit="return confirm('Delete user @user.Username?');">
                                        <input type="hidden" name="id" value="@user.Id" />
                                        <button type="submit" class="btn btn-sm btn-outline-danger">
                                            <i data-feather="trash"></i>
                                        </button>
                                    </form>
                                </div>
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    </div>
</div>

<style>
    .bg-success-soft { background-color: rgba(40, 167, 69, 0.1); }
    .bg-danger-soft { background-color: rgba(220, 53, 69, 0.1); }
</style>

